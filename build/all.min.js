"use strict";var game;game={mouseX:0,mouseY:0,canvas:null,ctx:null,scale:1,ratio:null,width:820,height:620,currentWidth:null,currentHeight:null,bImgX:0,bImgY:0,shipImgX:300,shipImgY:300,music:1,lworld:"begin",bossOne:!1,bulletArray:[],bulletTime:0,bulletPower:1,bulletAllow:null,bulletStyle:2,bulletNum:0,bulletConsume:0,damage:0,damage_show:0,hit:0,ammoUse:0,ammoUse_show:0,hurt:0,hurt_show:0,hitrate:0,openShield:!1,quakeAllow:!1,heroLife:10,infiniteLife:!1,whiteLine:[],buttonArray:[],audio:{},audioAllow:!0,energyValue:0,shield:!1,energyGuidingRotate:!1,energyGuidingRotateNum:-50,opacityGoBlack:1,opacityGoBlack_internal:0,goIntroductionImageheigh:0,pause:!1,rot:0,leftkey:!1,rightkey:!1,downkey:!1,upkey:!1,shipSpeed:2,scores_num:0,scores_view:"00000",enemySpeed:0,enemyArray:[],nextEnemy:20,explodeArray:[],weapons_system:!1,weapons_system_x:810,weapons_system_json:{up_lv:{xy:[[450,285],[450,335],[450,385],[615,285],[615,335],[615,385]],Whether:[[!1,"weaponsSystemImage_button_one"],[!1,"weaponsSystemImage_button_one"],[!1,"weaponsSystemImage_button_one"],[!1,"weaponsSystemImage_button_one"],[!1,"weaponsSystemImage_button_one"],[!1,"weaponsSystemImage_button_one"]]},open:{xy:[[570,290],[570,340],[570,390],[730,290],[730,340],[730,390]],Whether:[[!1,"weaponsSystemImage_close"],[!1,"weaponsSystemImage_close"],[!1,"weaponsSystemImage_close"],[!1,"weaponsSystemImage_close"],[!1,"weaponsSystemImage_close"],[!1,"weaponsSystemImage_close"]]}},failure:!1,particleArray:[],gemsArray:[],shieldSupplyArray:[],gemsNum:[0,0,0,0,0,0],energyTextArray:[],energyHint:[],fireBallArray:[],fireBallHintTime:400,fireBallAllow:!1,fireBallDangerHintImageAllow:!1,bossOneDangerHintImageAllow:!1,bossOneAllow:!1,bossOneHintTime:200,bossOneHintSpeed:0,bossOneBallArray:[],bossOneBallNum:0,bossOneBallTime:0,bossOneBallOneAllow:!1,bossOneBallTwoAllow:!1,victoryOne:!1,bossScores:200,statistics:!1,statisticsTime:200,lvRandomNum:0,lvNum:0,lvRandomSx:0,lvMidLeft:-179,lvMidRight:825,gameTimeIn:0,EndlessMode:!1,meteorArray:[]};
game.init=function(){var e,a,g,m,n,o,t,u,r,i;for(game.lworld="begin",game.ratio=game.width/game.height,game.currentHeight=game.height,game.currentWidth=game.width,game.canvas=document.getElementsByTagName("canvas")[0],game.ctx=game.canvas.getContext("2d"),game.canvas.width=game.width,game.canvas.height=game.height,game.resize(),game.audioLoad([{name:"buttonHoverMusic",audio:"button.wav",volume:.3},{name:"beginMusic",audio:"begin2.ogg",volume:.1,cycle:!0},{name:"warMusic",audio:"吴欣睿 - 临危.mp3",volume:.1,cycle:!0},{name:"middleMusic",audio:"guochang.mp3",volume:.1,cycle:!0},{name:"bullteMusic",audio:"zidanmusic1.wav",volume:.1,cycle:!0},{name:"explodeMusic",audio:"baozhamusic.mp3",volume:.5},{name:"weaponssSystemMusic",audio:"wuqixitongdakai.wav",volue:1},{name:"lvCollideMusic",audio:"lvzhuangji.wav",volue:1}]),game.imageLoad([["targetImage","target.png"],["backgroundImage","login.jpg"],["backgroundImage_help","bangzhu.jpg"],["beginImage","begin.png"],["beginImage_hover","h_begin.png"],["setupImage","shezhi.png"],["setupImage_hover","h_shezhi.png"],["helpImage","bangzhu.png"],["helpImage_hover","h_bangzhu.png"],["authorImage","zhizuo.png"],["authorImage_hover","h_zhizuo.png"],["voiceImage","shengyin.png"],["voiceOffImage","shenyinguanbi.png"],["voiceImage_hover","shengyinkaiqihover.png"],["voiceOffImage_hover","shengyinguanbi.png"],["easyImage","jiandan.png"],["easyImage_hover","jiandan1.png"],["shookImage","chuangkoudoudong.png"],["shookImage_hover","chuangkoudoudong1.png"],["backImage","fanhui.png"],["backImage_hover","fanhuiyouxi1.png"],["backInImage","fanhuicaidan.png"],["backInImage_hover","fanhuicaidan.png"],["setup_window","tanchuang2.png"],["backgroundImage_go","backg.jpg"],["gameFrameImage","backg2.png"],["energyTankUpImage","nengliangcaoshang.png"],["energyTankDownImage","nengliangcaoxia.png"],["energyTankImage","nengliangtiao.png"],["energyGuidingImage","nengliangzhizhen.png"],["energyStationImage","nengliangpan.png"],["goBeginImage","b.png"],["goBeginImage_hover","b2.png"],["goIntroductionImage","gojieshao.png"],["heroImage","self5.png"],["heroImage_shield_one","feiji.png"],["heroImage_shield_two","hudun.png"],["flameImage","weiyan.png"],["scoresImage","fenshuimg.png"],["enemyImage_one","diren1.png"],["enemyImage_two","diren2.png"],["explodeImage","baozha.png"],["bulletImage_one","/bullet/1.png"],["bulletImage_two","/bullet/2.png"],["bulletImage_three","/bullet/1a.png"],["bulletImage_four","/bullet/2a.png"],["bulletImage_five","/bullet/1c.png"],["bulletImage_six","/bullet/4.png"],["bulletImage_seven","/bullet/222.png"],["weaponsSystemImage_frame","wuqixitong.png"],["weaponsSystemImage_button_one","qianghuaanniu1.png"],["weaponsSystemImage_button_two","qianghuaanniu2.png"],["weaponsSystemImage_open","qiyong2.png"],["weaponsSystemImage_close","qiyong1.png"],["pasuseImage","zanting.png"],["bloodGrooveImage_bottom","xuecaodi1.png"],["bloodGrooveImage_bottom_danger","xuecaodi2.png"],["bloodGrooveImage_hp","xuetiao1.png"],["bloodGrooveImage_hp_danger","xuetiao2.png"],["bloodGrooveImage_frame","xuecao1.png"],["bloodGrooveImage_frame_danger","xuecao2.png"],["dangerImage","weixianzhuangtai.png"],["gemsImage","baoshi.png"],["gemsScoresImage","jiafen.png"],["failureImage","shibai.png"],["fireBallDangerHintImage","jinggao.png"],["fireBallImage","huoqiu.png"],["bossDangerHintImage_bottom","weixianjinggaodibu.png"],["bossDangerHintImage_frame","weixianjinggao.png"],["bossDangerHintImage_text","weixianjinggaozi.png"],["bossDangerHintImage_bk","bossxuese.png"],["bossImage","boss1.png"],["bossBallImage","/bullet/boss1.png"],["bossBallImage_two","/bullet/13.png"],["bossjiguangImage","/bullet/14.png"],["shieldSupplyImage","hudunbuji.png"],["lvImage_bottom","dengji-pi.png"],["lvImage_mid","dengji-di.png"],["lvImage_lv","dengji.png"],["backImage_die","fanhuicaidan.png"],["ContinueChallengeImage","jixutiaozhan.png"],["enemyImage_one_lv2","/lv2/1.png"],["enemyImage_two_lv2","/lv2/2.png"],["enemyImage_three_lv2","/lv2/3.png"],["enemyImage_four_lv2","/lv2/4.png"],["enemyImage_five_lv2","/lv2/8.png"],["enemyImage_six_lv2","/lv2/10.png"],["enemyImage_seven_lv2","/lv2/Mech1A.png"],["enemyImage_eight_lv2","/lv2/Mech3.png"],["enemyImage_nine_lv2","/lv2/Mech4.png"]]),game.begin_button=[new game.button(565,285,172,55,"normal",game.beginImage,"beginImage"),new game.button(585,350,123,39,"normal",game.setupImage,"setupImage"),new game.button(585,400,123,39,"normal",game.helpImage,"helpImage"),new game.button(585,450,123,39,"normal",game.authorImage,"authorImage")],game.setup_button=[new game.button(310,230,177,35,"normal",game.voiceImage,"voiceImage"),new game.button(310,285,177,35,"normal",game.easyImage,"easyImage"),new game.button(310,335,177,35,"normal",game.shookImage,"shookImage"),new game.button(310,390,177,35,"normal",game.backImage,"backImage")],game.help_button=[new game.button(600,540,177,35,"normal",game.backInImage,"backInImage")],game.author_button=[new game.button(600,540,177,35,"normal",game.backInImage,"backInImage")],game.go_button=[new game.button(364,405,73,24,"normal",game.goBeginImage,"goBeginImage")],document.onmousemove=function(){var e;game.target.on_off="off",e&&clearTimeout(e),e=setTimeout(function(){return game.target.on_off="on"},500)},game.buttonHover_begin=function(e){var a,g,m,n,o;for(e.preventDefault(),n=game.mouseX,o=game.mouseY,a=g=0,m=game.buttonArray.length-1;m>=0?m>=g:g>=m;a=m>=0?++g:--g)game.buttonArray[a].music===!0&&game.buttonArray[a].musicNum<=1&&(game.audio.buttonHoverMusic.load(),game.audio.buttonHoverMusic.play()),n>game.buttonArray[a].x&&n<game.buttonArray[a].x+game.buttonArray[a].w&&o>game.buttonArray[a].y&&o<game.buttonArray[a].y+game.buttonArray[a].h?(game.buttonArray[a].image=game[game.buttonArray[a].name+"_hover"],game.buttonArray[a].music=!0,game.buttonArray[a].musicNum++):(game.buttonArray[a].image=game[game.buttonArray[a].name],game.buttonArray[a].music=!1,game.buttonArray[a].musicNum=0)},game.buttonUp_go=function(e){var a,g;return e.preventDefault(),a=game.mouseX,g=game.mouseY,a>364&&437>a&&g>405&&429>g&&game.opacityGoBlack<=0?(game.lworld="gogo",game.gameTime=(new Date).getTime(),game.audio.middleMusic.load(),game.audio.beginMusic.load(),game.audio.warMusic.play(),window.removeEventListener("mousemove",game.buttonHover_begin),window.removeEventListener("mouseup",game.buttonUp_go),window.addEventListener("keydown",game.directionKeyDown),window.addEventListener("keyup",game.directionKeyUp)):void 0},game.buttonUp_begin=function(e){var a,g,m,n,o;for(e.preventDefault(),n=game.mouseX,o=game.mouseY,a=g=0,m=game.buttonArray.length-1;m>=0?m>=g:g>=m;a=m>=0?++g:--g)n>game.buttonArray[a].x&&n<game.buttonArray[a].x+game.buttonArray[a].w&&o>game.buttonArray[a].y&&o<game.buttonArray[a].y+game.buttonArray[a].h&&(game.lworld=game.buttonArray[a].name.split("I")[0],"begin"!==game.lworld?window.removeEventListener("mouseup",game.buttonUp_begin):(game.lworld="go",game.backgroundImage.src="./image/backg.jpg",game.audio.beginMusic.volume_allow&&(game.audio.beginMusic.volume=.2),game.audio.middleMusic.play(),window.removeEventListener("mouseup",game.buttonUp_begin),window.addEventListener("mouseup",game.buttonUp_go),game.buttonArray=game.go_button),"setup"===game.lworld&&(window.addEventListener("mouseup",game.buttonUp_setup),game.backgroundImage.src="./image/shezhiyemian.jpg",game.buttonArray=game.setup_button),"help"===game.lworld&&(window.addEventListener("mouseup",game.buttonUp_setup),game.backgroundImage.src="./image/bangzhu.jpg",game.buttonArray=game.help_button),"author"===game.lworld&&(window.addEventListener("mouseup",game.buttonUp_setup),game.backgroundImage.src="./image/tuandui.jpg",game.buttonArray=game.author_button))},game.buttonUp_setup=function(e){var a,g,m,n,o;for(e.preventDefault(),n=game.mouseX,o=game.mouseY,a=g=0,m=game.buttonArray.length-1;m>=0?m>=g:g>=m;a=m>=0?++g:--g)n>game.buttonArray[a].x&&n<game.buttonArray[a].x+game.buttonArray[a].w&&o>game.buttonArray[a].y&&o<game.buttonArray[a].y+game.buttonArray[a].h&&"back"===game.buttonArray[a].name.split("I")[0]&&(window.removeEventListener("mouseup",game.buttonUp_setup),window.addEventListener("mouseup",game.buttonUp_begin),game.lworld="begin",game.backgroundImage.src="./image/login.jpg",game.buttonArray=game.begin_button)},game.directionKeyDown=function(e){if("gogo"===game.lworld)switch(e.keyCode){case 87:return game.upkey=!0;case 83:return game.downkey=!0;case 65:return game.leftkey=!0;case 68:return game.rightkey=!0}},game.directionKeyUp=function(e){if("gogo"===game.lworld)switch(e.keyCode){case 87:return game.upkey=!1;case 83:return game.downkey=!1;case 65:return game.leftkey=!1;case 68:return game.rightkey=!1;case 82:if(game.weapons_system?(game.weapons_system=!1,game.weapons_system_x=820):game.weapons_system=!0,game.weapons_system)return game.audio.weaponssSystemMusic.load(),game.audio.weaponssSystemMusic.play()}},game.bulletGo=function(){var e;switch(game.bulletTime++,game.audio.bullteMusic.play(),game.bulletStyle){case 1:game.bulletTime%5===0&&(game.bulletPower=1,game.ammoUse++,game.bulletArray.push(new game.bullet(game.shipImgX,game.shipImgY,game.rot,-12.5,-6,game.bulletImage_one)));break;case 2:game.bulletTime%3===0&&(game.ammoUse++,game.bulletPower=1,game.bulletArray.push(new game.bullet(game.shipImgX,game.shipImgY+5,game.rot,-9,-4,game.bulletImage_two)));break;case 3:game.bulletTime%2===0&&(game.ammoUse++,game.bulletPower=1,e=game.rot+(.5*Math.random()-.27),game.bulletArray.push(new game.bullet(game.shipImgX,game.shipImgY,e,-20,-10,game.bulletImage_three)));break;case 4:game.bulletTime%2===0&&(game.ammoUse++,game.bulletPower=2,game.bulletArray.push(new game.bullet(game.shipImgX,game.shipImgY,game.rot,-12.5,-7.5,game.bulletImage_four)));break;case 5:game.bulletTime%4===0&&(game.ammoUse++,game.bulletPower=3,game.bulletArray.push(new game.bullet(game.shipImgX,game.shipImgY,game.rot,-24.5,-30,game.bulletImage_five)));break;case 6:game.bulletTime%2===0&&(game.ammoUse++,game.bulletPower=3,game.bulletArray.push(new game.bullet(game.shipImgX,game.shipImgY,game.rot,-20,-7.5,game.bulletImage_six)));break;case 7:game.bulletTime%8===0&&(game.ammoUse++,game.bulletPower=3,game.bulletArray.push(new game.bullet(game.shipImgX,game.shipImgY,game.rot,-20,-8,game.bulletImage_seven)))}game.bulletAllow=window.requestAnimationFrame(game.bulletGo)},document.onmouseup=function(){var e,a,g;if("setup"===game.lworld&&game.mouseX>game.setup_button[0].x&&game.mouseX<game.setup_button[0].x+game.setup_button[0].w&&game.mouseY>game.setup_button[0].y&&game.mouseY<game.setup_button[0].y+game.setup_button[0].h&&(game.audioAllow=game.audioAllow?!1:!0,game.audioAllow?(game.audioVolumeswitch("on"),game.setup_button[0].image=game.voiceImage,game.setup_button[0].name="voiceImage"):(game.audioVolumeswitch("off"),game.setup_button[0].image=game.voiceOffImage,game.setup_button[0].name="voiceOffImage")),"gogo"===game.lworld&&(game.audio.bullteMusic.load(),game.bulletTime=0,window.cancelAnimationFrame(game.bulletAllow),game.bulletAllow=null,game.failure&&game.mouseX>500&&game.mouseY>375&&game.mouseX<600&&game.mouseY<395&&window.location.reload(),game.statistics&&game.mouseX>500&&game.mouseY>375&&game.mouseX<600&&game.mouseY<395&&(game.EndlessMode=!0,game.gameTime=(new Date).getTime(),game.nextEnemy=200),game.weapons_system))for(e=a=0,g=game.weapons_system_json.up_lv.xy.length-1;g>=0?g>=a:a>=g;e=g>=0?++a:--a)game.mouseX>game.weapons_system_json.open.xy[e][0]&&game.mouseY>game.weapons_system_json.open.xy[e][1]&&game.mouseX<game.weapons_system_json.open.xy[e][0]+50&&game.mouseY<game.weapons_system_json.open.xy[e][1]+20&&(game.gemsNum[e]>10?(game.bulletStyle=e+1,game.gemsNum[e]-=10):game.energyHint.push(new game.hint(game.weapons_system_json.open.xy[e][0],game.weapons_system_json.open.xy[e][1])))},document.onmousedown=function(){var e,a;"gogo"!==game.lworld||game.pause||(e=game.mouseX,a=game.mouseY,game.bulletGo(e,a))},document.oncontextmenu=function(e){return e.preventDefault(),game.pause=game.pause?!1:!0,!1},game.audioVolumeswitch("on"),window.addEventListener("mousemove",function(e){game.mousePosition.set(e),game.mouseX=game.mousePosition.x/game.scale,game.mouseY=game.mousePosition.y/game.scale}),window.addEventListener("mousemove",game.buttonHover_begin),window.addEventListener("mouseup",game.buttonUp_begin),game.buttonArray=game.begin_button,game.target=new game.targetFn(game.mouseX,game.mouseY),game.spaceShip=new game.hero(game.shipImgX,game.shipImgY,66,66,"initial"),m=e=0;200>=e;m=++e)game.meteorArray.push(new game.meteor(820*Math.random(),620*Math.random(),.4,.5,.1,"red"));for(m=a=0;100>=a;m=++a)game.meteorArray.push(new game.meteor(820*Math.random(),620*Math.random(),.6,1,.1,"red"));for(m=g=0;50>=g;m=++g)game.meteorArray.push(new game.meteor(820*Math.random(),620*Math.random(),.4,1,.1,"red"));for(m=n=0;20>=n;m=++n)game.meteorArray.push(new game.meteor(820*Math.random(),620*Math.random(),.4,1.5,.4));for(m=o=0;20>=o;m=++o)game.meteorArray.push(new game.meteor(820*Math.random(),620*Math.random(),.6,1.5,.5));for(m=t=0;10>=t;m=++t)game.meteorArray.push(new game.meteor(820*Math.random(),620*Math.random(),.2,1.5,1));for(m=u=0;2>=u;m=++u)game.meteorArray.push(new game.meteor(820*Math.random(),620*Math.random(),.6,3,2));for(m=r=0;2>=r;m=++r)game.meteorArray.push(new game.meteor(820*Math.random(),620*Math.random(),.6,3,1));for(m=i=0;2>=i;m=++i)game.meteorArray.push(new game.meteor(820*Math.random(),620*Math.random(),.6,3,4));return game.radar=new game.hero(61,576,50,50,"radar"),game.bossOne=new game.boss,game.jiguangpao=new game.jiguang,game.shipFlame=new game.flame,game.audio.beginMusic.play(),game.loop()};
game.update=function(){var e,a,m,g,r,l,n,s,o,y,i,p,t,u,h,A,b,d,c,I,w,O,f,v,x,B,Y,S;if(game.target.x=game.mouseX,game.target.y=game.mouseY,game.target.update(),"go"===game.lworld){if(game.opacityGoBlack>0&&(game.opacityGoBlack>0&&(game.opacityGoBlack-=.002),game.opacityGoBlack<=.5&&(game.opacityGoBlack_internal-=.004),game.whiteLine.push(new game.line),game.opacityGoBlack>.5))for(o=0;o<game.whiteLine.length;)game.whiteLine[o].update(),game.whiteLine[o].remove===!0&&game.whiteLine.splice(o,1),o++;game.opacityGoBlack<.5&&game.goIntroductionImageheigh<253&&(game.goIntroductionImageheigh+=.2)}if("gogo"===game.lworld&&!game.pause){if(game.EndlessMode){for(u=0;u<game.meteorArray.length;)game.meteorArray[u].update(),game.meteorArray[u].remove&&(game.meteorArray[u].x=20*Math.random()+810,game.meteorArray[u].y=620*Math.random(),game.meteorArray[u].remove=!1),u++;game.nextEnemy-=1,game.nextEnemy<40&&(game.gameTimeIn<.5&&(game.enemyArray.push(new game.enemy("lv2one")),game.enemyArray.push(new game.enemy("lv2two")),game.nextEnemy=340*Math.random()+40),game.gameTimeIn>=.5&&game.gameTimeIn<1&&(game.enemyArray.push(new game.enemy("lv2four")),game.enemyArray.push(new game.enemy("lv2five")),game.enemyArray.push(new game.enemy("lv2seven")),game.nextEnemy=220*Math.random()+40),game.gameTimeIn>=1&&(game.enemyArray.push(new game.enemy("lv2four")),game.enemyArray.push(new game.enemy("lv2five")),game.enemyArray.push(new game.enemy("lv2seven")),game.enemyArray.push(new game.enemy("lv2eight")),game.nextEnemy=120*Math.random()+40))}if(game.gameTimeIn=((new Date).getTime()-game.gameTime)/6e4,game.energyValue>0&&game.energyValue<400?game.energyValue-=.9:game.energyValue>=400&&(game.energyValue-=.8),game.energyValue>=200?(game.spaceShip.shield="shield_one",game.shield=!0):(game.spaceShip.shield="initial",game.shield=!1),game.energyValue>750&&(game.energyValue=750),game.leftkey&&(game.shipImgX-=game.shipSpeed,game.shipImgX<30&&(game.shipImgX=30),game.bImgX-=game.shipSpeed,game.bImgX<0&&(game.bImgX=0)),game.rightkey&&(game.shipImgX+=game.shipSpeed,game.shipImgX>760&&(game.shipImgX=760),game.bImgX+=game.shipSpeed,game.bImgX>620&&(game.bImgX=620)),game.downkey&&(game.shipImgY+=game.shipSpeed,game.shipImgY>570&&(game.shipImgY=570),game.bImgY+=game.shipSpeed,game.bImgY>820&&(game.bImgY=820)),game.upkey&&(game.shipImgY-=game.shipSpeed,game.shipImgY<40&&(game.shipImgY=40),game.bImgY-=game.shipSpeed,game.bImgY<0&&(game.bImgY=0)),game.spaceShip.x=game.shipImgX,game.spaceShip.y=game.shipImgY,game.spaceShip.update(),game.bossOneAllow){if(game.bossOne.update(),game.bossOneBallNum++,game.bossOne.balltwo&&game.jiguangpao.update(),game.bossOne.ballone&&(game.bossOneBallTime++,game.bossOneBallTime%11===0&&game.bossOneBallOneAllow&&(game.bossOneBallArray.push(new game.bossBall(game.bossOne.x-50,game.bossOne.y+60,2)),game.bossOneBallArray.push(new game.bossBall(game.bossOne.x-50,game.bossOne.y-60,-2))),game.bossOneBallTime%99===0))for(game.bossOneBallOneAllow=game.bossOneBallOneAllow?!1:!0,game.bossOneBallArray.push(new game.bossBall(game.bossOne.x-50,game.bossOne.y+60,0)),game.bossOneBallArray.push(new game.bossBall(game.bossOne.x-75,game.bossOne.y+30,0)),game.bossOneBallArray.push(new game.bossBall(game.bossOne.x-100,game.bossOne.y,0)),game.bossOneBallArray.push(new game.bossBall(game.bossOne.x-75,game.bossOne.y-30,0)),game.bossOneBallArray.push(new game.bossBall(game.bossOne.x-50,game.bossOne.y-60,0)),B=0;360>=B;)game.bossOneBallArray.push(new game.bossBallTwo(game.bossOne.x,game.bossOne.y,B)),B+=30;for(g=0;g<game.bossOneBallArray.length;)game.bossOneBallArray[g].update(),game.collide(game.bossOneBallArray[g],game.spaceShip,!0)&&(game.quakeAllow&&(game.quakeAllow=!1,clearInterval(w),I=45,w=setInterval(function(){return I%5===0?game.bImgY+=4:game.bImgY-=4,game.bImgY<0&&(game.bImgY=0),game.bImgY>620&&(game.bImgY=620),I--,0>I?(game.quakeAllow=!0,clearInterval(w)):void 0},130)),game.bossOneBallArray[g].remove=!0,game.shield?game.energyValue-=80:game.heroLife--,game.damage++),game.bossOneBallArray[g].remove&&game.bossOneBallArray.splice(g,1),g++;for(m=0;m<game.bulletArray.length;){if(game.collide(game.bulletArray[m],game.bossOne,!1)&&(game.bossOne.life-=game.bulletPower,game.bulletArray[m].remove=!0,game.hurt+=game.bulletPower,game.hit++,game.victoryOne=!0,f=10*Math.random(),1>=f)){for(game.energyValue+=80,c=y=0;60>=y;c=++y)game.particleArray.push(new game.particle(game.bossOne.x,game.bossOne.y,2));game.energyHint.push(new game.shieldSupply(game.bossOne.x,game.bossOne.y))}game.bulletArray[m].remove&&game.bulletArray.splice(m,1),m++}game.bossOne.life<=0&&(game.bossOne.ballone=!1,game.bossOne.balltwo=!1,game.explodeArray.push(new game.explode(game.bossOne.x+160*Math.random()-80,game.bossOne.y+160*Math.random()-80)),game.bossScores-=2,game.scores_num+=2,game.bossScores<=0&&(game.bossOneAllow=!1,game.statistics=!0))}else game.EndlessMode||(game.nextEnemy-=1,game.nextEnemy<40&&(game.gameTimeIn<.5?(game.enemyArray.push(new game.enemy("one")),game.enemyArray.push(new game.enemy("two")),game.nextEnemy=220*Math.random()+40):game.gameTimeIn>=.5&&game.gameTimeIn<1&&(game.enemyArray.push(new game.enemy("one")),game.enemyArray.push(new game.enemy("two")),game.fireBallArray.push(new game.fireBall),game.nextEnemy=120*Math.random()+40)));for(l=0;l<game.fireBallArray.length;)game.fireBallArray[l].update(),game.collide(game.spaceShip,game.fireBallArray[l],!1)&&(game.quakeAllow&&(game.quakeAllow=!1,clearInterval(w),I=45,w=setInterval(function(){return I%5===0?game.bImgY+=4:game.bImgY-=4,game.bImgY<0&&(game.bImgY=0),game.bImgY>620&&(game.bImgY=620),I--,0>I?(game.quakeAllow=!0,clearInterval(w)):void 0},130)),game.fireBallArray[l].remove=!0,game.shield?game.energyValue-=80:game.heroLife--,game.damage++),game.fireBallArray[l].remove&&game.fireBallArray.splice(l,1),l++;for(i=0;i<game.enemyArray.length;){if(game.enemyArray[i].update(),game.collide(game.spaceShip,game.enemyArray[i],!1)){for(game.quakeAllow&&(game.quakeAllow=!1,clearInterval(w),I=45,w=setInterval(function(){return I%5===0?game.bImgY+=4:game.bImgY-=4,game.bImgY<0&&(game.bImgY=0),game.bImgY>620&&(game.bImgY=620),I--,0>I?(game.quakeAllow=!0,clearInterval(w)):void 0},130)),game.enemyArray[i].remove=!0,game.audio.explodeMusic.load(),game.audio.explodeMusic.play(),game.enemyArray[i].life=0,game.explodeArray.push(new game.explode(game.enemyArray[i].x,game.enemyArray[i].y)),game.scores_num++,A=p=0,v=O;v>=0?v>=p:p>=v;A=v>=0?++p:--p)game.gemsArray.push(new game.gems(game.enemyArray[i].x,game.enemyArray[i].y,game.shipImgX,game.shipImgY));for(c=t=0;60>=t;c=++t)game.particleArray.push(new game.particle(game.enemyArray[i].x,game.enemyArray[i].y,2));game.shield?game.energyValue-=80:game.heroLife--,game.damage++}game.enemyArray[i].remove&&game.enemyArray.splice(i,1),i++}for(r=0;r<game.bulletArray.length;){for(game.bulletArray[r].update(),e=0;e<game.enemyArray.length;){if(game.collide(game.bulletArray[r],game.enemyArray[e],!1)&&(game.quakeAllow&&(game.quakeAllow=!1,clearInterval(w),I=45,w=setInterval(function(){return I%5===0?game.bImgY+=4:game.bImgY-=4,game.bImgY<0&&(game.bImgY=0),game.bImgY>620&&(game.bImgY=620),I--,0>I?(game.quakeAllow=!0,clearInterval(w)):void 0},130)),game.bulletArray[r].remove=!0,game.enemyArray[e].life-=game.bulletPower,game.hurt+=game.bulletPower,game.hit++,game.enemyArray[e].life<=0)){for(game.audio.explodeMusic.load(),game.audio.explodeMusic.play(),game.explodeArray.push(new game.explode(game.enemyArray[e].x,game.enemyArray[e].y)),game.scores_num++,O=6*Math.random()+3,A=h=0,x=O;x>=0?x>=h:h>=x;A=x>=0?++h:--h)game.gemsArray.push(new game.gems(game.enemyArray[e].x,game.enemyArray[e].y,game.shipImgX,game.shipImgY));for(c=b=0;60>=b;c=++b)game.particleArray.push(new game.particle(game.enemyArray[e].x,game.enemyArray[e].y,2))}e++}game.bulletArray[r].remove&&game.bulletArray.splice(r,1),r++}for(n=0;n<game.gemsArray.length;)game.gemsArray[n].update(),game.collide(game.gemsArray[n],game.spaceShip,!0)&&(game.shieldSupplyArray.push(new game.gemsScores(game.shipImgX,game.shipImgY,game.gemsArray[n].random)),game.gemsArray[n].remove=!0,game.gemsNum[game.gemsArray[n].random]++),game.gemsArray[n].remove&&game.gemsArray.splice(n,1),n++;for(Y=0;Y<game.shieldSupplyArray.length;)game.shieldSupplyArray[Y].update(),game.shieldSupplyArray[Y].remove&&game.shieldSupplyArray.splice(Y,1),Y++;for(s=0;s<game.energyHint.length;)game.energyHint[s].update(),game.energyHint[s].remove&&game.energyHint.splice(s,1),s++;for(d=0;d<game.particleArray.length;)game.particleArray[d].update(),game.particleArray[d].remove&&(game.energyTextArray.push(new game.energyText(game.particleArray[d].x,game.particleArray[d].y)),game.particleArray.splice(d,1)),d++;for(S=0;S<game.energyTextArray.length;)game.energyTextArray[S].update(),game.energyTextArray[S].remove&&(game.energyValue++,game.energyTextArray.splice(S,1)),S++;for(a=0;a<game.explodeArray.length;)game.explodeArray[a].update(),game.explodeArray[a].remove&&game.explodeArray.splice(a,1),a++;game.shipFlame.update(),game.rot=Math.atan2(game.mouseY/game.scale-game.spaceShip.y,game.mouseX/game.scale-game.spaceShip.x)}};
game.render=function(){var e,a,m,g,r,t,o,n,s,l,d,w,i,I,x,y,_,h,b;if(game.Draw.clear(),game.ctx.drawImage(game.backgroundImage,game.bImgX,game.bImgY,820,620,0,0,820,620),"setup"===game.lworld&&game.ctx.drawImage(game.setup_window,5,0,295,354,262,162,295,354),"setup"===game.lworld||"begin"===game.lworld||"help"===game.lworld||"author"===game.lworld)for(n=s=0,x=game.buttonArray.length-1;x>=0?x>=s:s>=x;n=x>=0?++s:--s)game.ctx.drawImage(game.buttonArray[n].image,0,0,game.buttonArray[n].w,game.buttonArray[n].h,game.buttonArray[n].x,game.buttonArray[n].y,game.buttonArray[n].w,game.buttonArray[n].h);if("go"===game.lworld){if(game.drawFrame(),game.opacityGoBlack>0&&game.Draw.rect(274,135,265,298,"rgba(0,0,0,"+game.opacityGoBlack_internal+")"),game.ctx.drawImage(game.setup_window,5,0,295,354,262,112,295,354),"go"===game.lworld)for(n=d=0,y=game.buttonArray.length-1;y>=0?y>=d:d>=y;n=y>=0?++d:--d)game.ctx.drawImage(game.buttonArray[n].image,0,0,game.buttonArray[n].w,game.buttonArray[n].h,game.buttonArray[n].x,game.buttonArray[n].y,game.buttonArray[n].w,game.buttonArray[n].h);if(game.opacityGoBlack>.5)for(n=0;n<game.whiteLine.length;)game.whiteLine[n].render(),n++;game.Draw.rect(0,0,820,620,"rgba(0,0,0,"+game.opacityGoBlack+")"),game.opacityGoBlack<.5&&game.goIntroductionImageheigh<255&&game.ctx.drawImage(game.goIntroductionImage,5,0,295,40+game.goIntroductionImageheigh,262,362-game.goIntroductionImageheigh,295,40+game.goIntroductionImageheigh)}if("gogo"===game.lworld){if(game.EndlessMode)for(game.Draw.rect(0,0,820,630,"rgba(0,0,0,1)"),game.meteorArray,i=0;i<game.meteorArray.length;)game.meteorArray[i].render(),i++;for(game.radar.Draw(game.ctx,game.rot),game.heroLife>4?(game.ctx.drawImage(game.bloodGrooveImage_bottom,0,0,300,24,103,585,300,24),game.ctx.drawImage(game.bloodGrooveImage_hp,0,0,300,24,103,585,30*game.heroLife,24),game.ctx.drawImage(game.bloodGrooveImage_frame,0,0,300,24,103,585,300,24)):game.heroLife<=4&&(game.ctx.drawImage(game.bloodGrooveImage_bottom_danger,0,0,300,24,103,585,300,24),game.ctx.drawImage(game.bloodGrooveImage_hp_danger,0,0,300,24,103,585,30*game.heroLife,24),game.ctx.drawImage(game.bloodGrooveImage_frame_danger,0,0,300,24,103,585,300,24)),game.heroLife<=0&&(game.pause=!0,game.failure=!0),r=0;r<game.fireBallArray.length;)game.fireBallArray[r].render(),r++;for(g=0;g<game.bulletArray.length;)game.bulletArray[g].render(),g++;if(game.shipFlame.render(game.rot),game.spaceShip.Draw(game.ctx,game.rot),game.gameTimeIn>=1&&game.bossScores>0&&(game.bossOneAllow=!0,game.bossOneHintTime>0&&(game.bossOneHintTime--,game.bossOneHintTime%20===0&&(game.bossOneDangerHintImageAllow=game.bossOneDangerHintImageAllow?!1:!0),game.bossOneDangerHintImageAllow&&(game.bossOneHintSpeed+=2,game.ctx.drawImage(game.bossDangerHintImage_bk,0,0),game.ctx.drawImage(game.bossDangerHintImage_bottom,game.bossOneHintSpeed,0,820,102,0,240,820,102),game.ctx.drawImage(game.bossDangerHintImage_frame,0,240),game.ctx.drawImage(game.bossDangerHintImage_text,0,240)))),game.bossOneAllow){for(game.bossOne.balltwo&&game.jiguangpao.render(),m=0;m<game.bossOneBallArray.length;)game.bossOneBallArray[m].render(),m++;game.bossOne.render()}for(l=0;l<game.enemyArray.length;)game.enemyArray[l].render(),l++;for(a=0;a<game.explodeArray.length;)game.explodeArray[a].render(),a++;for(t=0;t<game.gemsArray.length;)game.gemsArray[t].render(),t++;for(h=0;h<game.shieldSupplyArray.length;)game.shieldSupplyArray[h].render(),h++;for(I=0;I<game.particleArray.length;)game.particleArray[I].render(),I++;for(b=0;b<game.energyTextArray.length;)game.energyTextArray[b].render(),b++;if(game.gameTimeIn>=.5?game.fireBallHintTime>0&&(game.fireBallHintTime--,game.fireBallHintTime%20===0&&(game.fireBallDangerHintImageAllow=game.fireBallDangerHintImageAllow?!1:!0),game.fireBallDangerHintImageAllow&&game.ctx.drawImage(game.fireBallDangerHintImage,263.5,180)):game.fireBallAllow=!0,game.weapons_system&&(game.weapons_system_x>430&&(game.weapons_system_x-=20,game.ctx.drawImage(game.weaponsSystemImage_frame,game.weapons_system_x,220)),game.weapons_system_x<=430))for(game.weapons_system_x=430,game.ctx.drawImage(game.weaponsSystemImage_frame,game.weapons_system_x,220),game.ctx.drawImage(game.gemsImage,0,0,25,25,570,240,17,17),game.Draw.text(game.gemsNum[0],595,252,1,"#fff"),game.ctx.drawImage(game.gemsImage,25,0,25,25,645,240,17,17),game.Draw.text(game.gemsNum[1],670,252,1,"#fff"),game.ctx.drawImage(game.gemsImage,50,0,25,25,710,240,17,17),game.Draw.text(game.gemsNum[2],735,252,1,"#fff"),game.ctx.drawImage(game.gemsImage,75,0,25,25,570,260,17,17),game.Draw.text(game.gemsNum[3],595,272,1,"#fff"),game.ctx.drawImage(game.gemsImage,100,0,25,25,645,260,17,17),game.Draw.text(game.gemsNum[4],670,272,1,"#fff"),game.ctx.drawImage(game.gemsImage,125,0,25,25,710,260,17,17),game.Draw.text(game.gemsNum[5],735,272,1,"rgba(250, 250, 250, 0.5)"),e=w=0,_=game.weapons_system_json.up_lv.xy.length-1;_>=0?_>=w:w>=_;e=_>=0?++w:--w)game.mouseX>game.weapons_system_json.open.xy[e][0]&&game.mouseY>game.weapons_system_json.open.xy[e][1]&&game.mouseX<game.weapons_system_json.open.xy[e][0]+50&&game.mouseY<game.weapons_system_json.open.xy[e][1]+20?game.weapons_system_json.open.Whether[e][1]="weaponsSystemImage_open":game.weapons_system_json.open.Whether[e][0]||(game.weapons_system_json.open.Whether[e][1]="weaponsSystemImage_close"),game.weapons_system_json.open.Whether[game.bulletStyle-1][1]="weaponsSystemImage_open",game.ctx.drawImage(game[game.weapons_system_json.up_lv.Whether[e][1]],game.weapons_system_json.up_lv.xy[e][0],game.weapons_system_json.up_lv.xy[e][1]),game.ctx.drawImage(game[game.weapons_system_json.open.Whether[e][1]],game.weapons_system_json.open.xy[e][0],game.weapons_system_json.open.xy[e][1]);for(game.statistics&&!game.EndlessMode&&(game.statisticsTime>0?(game.statisticsTime-=1,game.lvRandomNum++,game.ctx.drawImage(game.lvImage_bottom,340,200),game.lvRandomNum%5===0&&(game.lvRandomSx=150*Math.round(4*Math.random())),game.ctx.drawImage(game.lvImage_lv,game.lvRandomSx,0,150,138,330,170,150,138,game.Draw.text("The damaged:",140,520,15,"rgba(250,250,250,1)")),game.Draw.text(""+game.damage,260,520,15,"rgba(250,250,250,1)"),game.Draw.text("Bullet hurt:",140,540,15,"rgba(250,250,250,1)"),game.Draw.text(""+(game.hurt_show+=game.hurt/200).toFixed(2),260,540,15,"rgba(250,250,250,1)"),game.Draw.text("Bullet ammoUse:",140,560,15,"rgba(250,250,250,1)"),game.Draw.text(""+(game.ammoUse_show+=game.ammoUse/200).toFixed(2),290,560,15,"rgba(250,250,250,1)"),game.Draw.text("The hitrate:",390,560,15,"rgba(250,250,250,1)"),game.Draw.text((game.hit/game.ammoUse_show*100).toFixed(2)+"%",510,560,15,"rgba(250,250,250,1)")):(game.Draw.text("The damaged:",140,520,15,"rgba(250,250,250,1)"),game.Draw.text(""+game.damage,260,520,15,"rgba(250,250,250,1)"),game.Draw.text("Bullet hurt:",140,540,15,"rgba(250,250,250,1)"),game.Draw.text(""+game.hurt,260,540,15,"rgba(250,250,250,1)"),game.Draw.text("Bullet ammoUse:",140,560,15,"rgba(250,250,250,1)"),game.Draw.text(""+game.ammoUse,290,560,15,"rgba(250,250,250,1)"),game.Draw.text("The hitrate:",390,560,15,"rgba(250,250,250,1)"),game.Draw.text((game.hit/game.ammoUse*100).toFixed(2)+"%",510,560,15,"rgba(250,250,250,1)"),game.ctx.drawImage(game.lvImage_bottom,340,200),game.lvMidLeft<241&&game.lvMidLeft>100&&game.audio.lvCollideMusic.play(),game.lvMidLeft<=241?(game.lvNum++,e=game.lvNum/41,game.lvMidLeft=game.lvMidLeft+241*e*e*e,game.lvMidRight=game.lvMidRight-241*e*e*e,game.ctx.drawImage(game.lvImage_mid,0,0,164,132,game.lvMidLeft,170,164,132),game.ctx.drawImage(game.lvImage_mid,164,0,164,132,game.lvMidRight,170,164,132)):(game.ctx.drawImage(game.lvImage_mid,0,0,164,132,241,170,164,132),game.ctx.drawImage(game.lvImage_mid,164,0,164,132,405,170,164,132),game.ctx.drawImage(game.ContinueChallengeImage,500,375)),game.ctx.drawImage(game.lvImage_lv,game.lvRandomSx,0,150,138,330,170,150,138))),game.scores(),game.drawFrame(),game.heroLife<=4&&game.ctx.drawImage(game.dangerImage,0,0),o=0;o<game.energyHint.length;)game.energyHint[o].render(),o++;game.pause&&(game.failure?(game.ctx.drawImage(game.failureImage,0,0),game.ctx.drawImage(game.backImage_die,500,375)):game.ctx.drawImage(game.pasuseImage,310,175))}game.target.render()};
game.loop=function(){return window.requestAnimationFrame(game.loop),game.update(),game.render()};
game.resize=function(){window.innerHeight>=620?window.innerWidth>=820?(game.currentHeight=620,game.currentWidth=820):(game.currentWidth=window.innerWidth,game.currentHeight=game.currentWidth/game.ratio):window.innerWidth>=820?(game.currentHeight=window.innerHeight,game.currentWidth=game.currentHeight*game.ratio):(game.currentWidth=window.innerWidth,game.currentHeight=game.currentWidth/game.ratio),game.canvas.style.width=game.currentWidth+"px",game.canvas.style.height=game.currentHeight+"px",game.scale=game.currentWidth/game.width},game.Draw={clear:function(){game.ctx.clearRect(0,0,game.width,game.height)},rect:function(t,i,e,s,h){game.ctx.fillStyle=h,game.ctx.fillRect(t,i,e,s)},circle:function(t,i,e,s){game.ctx.fillStyle=s,game.ctx.beginPath(),game.ctx.arc(t,i,e,0,2*Math.PI,!0),game.ctx.closePath(),game.ctx.fill()},semiCircle:function(t,i,e,s,h){game.ctx.beginPath(),game.ctx.arc(778,603,32,0,Math.PI*(1+h),0),game.ctx.strokeStyle="white",game.ctx.lineWidth=3,game.ctx.stroke(),game.ctx.closePath()},text:function(t,i,e,s,h){game.ctx.font="bold "+s+"px Monospace",game.ctx.fillStyle=h,game.ctx.fillText(t,i,e)}},game.mousePosition={x:0,y:0,tapped:!1,set:function(t){var i,e;i=e=0,t.pageX||t.pageY?(i=t.pageX,e=t.pageY):(i=t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,e=t.clientY+document.body.scrollTop+document.documentElement.scrollTop),i-=game.canvas.offsetLeft,e-=game.canvas.offsetTop,this.x=i,this.y=e,this.tapped=!0}},game.drawFrame=function(){game.ctx.drawImage(game.energyTankDownImage,0,0),game.ctx.drawImage(game.energyTankImage,0,0,200,31,635,590,200,31),game.ctx.drawImage(game.energyTankUpImage,0,0),game.ctx.drawImage(game.energyStationImage,720,548),game.Draw.semiCircle(100,100,50,"red",game.energyValue/800),game.energyGuidingRotate===!1?game.energyGuidingRotateNum+=2:game.energyGuidingRotateNum-=2,game.energyGuidingRotateNum>=50&&(game.energyGuidingRotate=!0),game.energyGuidingRotateNum<=-50&&(game.energyGuidingRotate=!1),game.ctx.save(),game.ctx.translate(781,608),game.ctx.rotate(game.energyGuidingRotateNum%360*Math.PI/180),game.ctx.drawImage(game.energyGuidingImage,0,0,16,40,-8,-40,16,40),game.ctx.restore(),game.ctx.drawImage(game.gameFrameImage,0,0,820,620,0,0,820,620)},game.targetFn=function(t,i){this.x=t,this.y=i,this.sx=0,this.n=0,this.rot=0,this.spin=!1,this.on_off="on",this.update=function(){this.n++,"on"===this.on_off&&(this.rot+=.1,this.rot>50&&(this.spin=!0),this.spin&&(this.rot-=.3,this.rot<35&&(this.spin=!1,this.rot=0)))},this.render=function(){game.ctx.save(),game.ctx.translate(this.x,this.y),game.ctx.rotate(this.rot%360)*Math.PI/180,game.ctx.drawImage(game.targetImage,0,0,25,24,-12.5,-12,25,24),game.ctx.restore()}},game.imageLoad=function(t){var i,e,s,h,a;for(e=s=0,a=t.length-1;a>=0?a>=s:s>=a;e=a>=0?++s:--s)h=t[e][0],i=t[e][1],game[h]=new Image,game[h].src="./image/"+i,game[h].onload=function(){},game[h].onerror=function(){console.log(h+"图片加载错误")}},game.audioLoad=function(t){var i,e,s,h,a,m,n;for(i=e=0,n=t.length-1;n>=0?n>=e:e>=n;i=n>=0?++e:--e)a=t[i].name,s=t[i].audio,m=t[i].volume||.4,h=t[i].cycle||!1,game.audio[a]=new Audio,game.audio[a].src="./music/"+s,game.audio[a].volume=m,game.audio[a].volume_rem=m,game.audio[a].volume_allow=!0,h&&game.audio[a].addEventListener("ended",function(){return this.currentTime=0,this.load(),this.play()},!1)},game.audioVolumeswitch=function(t){var i,e,s,h,a;if("on"===t){i=game.audio,s=[];for(t in i)a=i[t],game.audio[t].volume=game.audio[t].volume_rem,s.push(game.audio[t].volume_allow=!0);return s}e=game.audio,h=[];for(t in e)a=e[t],game.audio[t].volume=0,h.push(game.audio[t].volume_allow=!1);return h},game.button=function(t,i,e,s,h,a,m){this.x=t,this.y=i,this.w=e,this.h=s,this.state=h,this.image=a,this.name=m,this.music=!1,this.musicNum=0},game.line=function(){this.type="go",this.x=0,this.y=parseInt(620*Math.random()),this.r=parseInt(1.5*Math.random()),this.opacity=1,this.fade=.05,this.remove=!1,this.update=function(){this.opacity-=this.fade,this.remove=this.opacity<0?!0:!1},this.render=function(){game.Draw.rect(this.x,this.y,820,this.r,"rgba(82,139,139,"+this.opacity+")")}},game.hero=function(t,i,e,s,h){this.x=t,this.y=i,this.w=e,this.h=s,this.shield=h,this.imageShift=40,this.rotation=0,this.sx=0,this.rotate=0,this.update=function(){"shield_one"===this.shield&&(this.rotate%3===0&&(this.sx+=115),this.rotate++,this.sx>=690&&(this.sx=0)),"shield_two"===this.shield&&(this.rotate%7===0&&(this.sx+=86),this.rotate++,this.sx>=344&&(this.sx=0)),"initial"===this.shield&&(this.sx=0)}},game.hero.prototype.Draw=function(t,i){this.rotation=i,t.save(),("initial"===this.shield||"radar"===this.shield)&&(this.image=game.heroImage),"shield_one"===this.shield&&(this.image=game.heroImage_shield_one),"shield_two"===this.shield&&(this.image=game.heroImage_shield_two),t.translate(this.x,this.y),t.rotate(this.rotation),"shield_one"===this.shield?(this.w=115,this.h=115,t.drawImage(this.image,this.sx,0,115,115,-57.5,-57.5,115,115)):"shield_two"===this.shield?(this.w=86,this.h=115,t.drawImage(this.image,this.sx,0,86,115,-43,-57.5,86,115)):("radar"===this.shield?(this.w=66,this.h=66):(this.w=66,this.h=66),t.drawImage(this.image,-33,-33,66,66)),t.restore()},game.flame=function(){this.sx=0,this.num=0,this.update=function(){this.num++,this.x=game.shipImgX,this.y=game.shipImgY,this.num%2===0&&(this.sx+=40),this.sx>320&&(this.sx=0)},this.render=function(t){game.ctx.save(),game.ctx.translate(this.x,this.y),game.ctx.rotate(t),game.ctx.drawImage(game.flameImage,this.sx,0,40,40,-30,-20.5,40,40),game.ctx.restore()}},game.scores=function(){var t,i,e;for(game.scores_num<1e6&&game.scores_num>=1e5?game.scores_view=""+game.scores_num:game.scores<1e5&&game.scores_num>=1e4?game.scores_view="0"+game.scores_num:game.scores_num<1e4&&game.scores_num>=1e3?game.scores_view="00"+game.scores_num:game.scores_num<1e3&&game.scores_num>=100?game.scores_view="000"+game.scores_num:game.scores_num<100&&game.scores_num>=10?game.scores_view="0000"+game.scores_num:game.scores_num<10&&(game.scores_view="00000"+game.scores_num),t=i=0,e=game.scores_view.length-1;e>=0?e>=i:i>=e;t=e>=0?++i:--i)game.ctx.drawImage(game.scoresImage,0+17*game.scores_view.charAt(t),0,17,25,35+17*t,29,17,25)},game.energyText=function(t,i){this.x=t,this.y=i,this.remove=!1,this.size=.1,this.dir=2*Math.random()>1?1:-1,this.vx=4*Math.random()*this.dir,this.vy=7*Math.random(),this.update=function(){this.x+=this.vx,this.y+=this.vy,this.vx*=.99,this.vy*=.99,this.vy-=.1,this.y<0&&(this.remove=!0)},this.render=function(){game.Draw.text("能量＋1",this.x,this.y,1,"rgba(47,79,79,1)")}},game.particle=function(t,i){this.x=t,this.y=i,this.r=2.5*Math.random()+.5,this.dir=2*Math.random()>1?1:-1,this.vx=4*Math.random()*this.dir,this.vy=7*Math.random(),this.colRandomR=Math.round(255*Math.random()),this.colRandomG=Math.round(255*Math.random()),this.colRandomB=Math.round(255*Math.random()),this.col="rgba(255,255,255,"+Math.random()+")",this.remove=!1,this.update=function(){this.x+=this.vx,this.y+=this.vy,this.vx*=.99,this.vy*=.99,this.vy-=.15,this.y<0&&(this.remove=!0)},this.render=function(){game.Draw.circle(this.x,this.y,this.r,this.col)}},game.gems=function(t,i,e,s){this.w=25,this.h=25,this.dx=t-e,this.dy=i-s,this.rad=Math.atan2(this.dy,this.dx),this.x=t,this.y=i,this.rot=Math.floor(180*Math.random()),this.dir=2*Math.random()>1?1:-1,this.vx=4*Math.random()*this.dir,this.vy=7*Math.random(),this.remove=!1,this.random=Math.round(5*Math.random()),this.update=function(){this.x+=this.vx,this.y+=this.vy,this.vx*=.99,this.vy*=.99,this.x-=6*Math.cos(this.rad),this.y-=6*Math.sin(this.rad),(this.y<0||this.y>620||this.x<0||this.x>820)&&(this.remove=!0)},this.render=function(){game.ctx.save(),game.ctx.translate(this.x,this.y),this.rot+=this.random,game.ctx.rotate(this.rot%360*Math.PI/180),game.ctx.drawImage(game.gemsImage,0+25*this.random,0,this.w,this.h,-12.5,-12.5,25,25),game.ctx.restore()}},game.enemy=function(t){this.type=t,this.random=0,"one"===this.type?(this.image=game.enemyImage_one,this.w=103,this.h=59,this.x=Math.random()*game.width,this.y=game.height,this.constant=this.x,this.life=5):"lv2seven"===this.type?(this.image=game.enemyImage_seven_lv2,this.w=164,this.h=97,this.x=Math.random()*game.width,this.y=game.height,this.constant=this.x,this.life=25):"lv2eight"===this.type?(4*Math.random()<1&&(this.random=6),this.image=game.enemyImage_eight_lv2,this.w=118,this.h=103,this.x=Math.random()*game.width,this.y=game.height,this.constant=this.x,this.life=25):"two"===this.type?(this.image=game.enemyImage_two,this.w=59,this.h=103,this.x=game.width,this.y=Math.random()*game.height,this.constant=this.y,this.life=5):"lv2one"===this.type?(4*Math.random()<1&&(this.random=5),this.image=game.enemyImage_one_lv2,this.w=205,this.h=132,this.x=game.width,this.y=Math.random()*(game.height-50),this.constant=this.y,this.life=20):"lv2four"===this.type?(2*Math.random()<1&&(this.random=5),this.image=game.enemyImage_four_lv2,this.w=266,this.h=86,this.x=game.width,this.y=Math.random()*(game.height-50),this.constant=this.y,this.life=25):"lv2five"===this.type?(3*Math.random()<1&&(this.random=5),this.image=game.enemyImage_five_lv2,this.w=277,this.h=82,this.x=game.width,this.y=Math.random()*(game.height-50),this.constant=this.y,this.life=25):"lv2two"===this.type&&(this.image=game.enemyImage_two_lv2,this.w=232,this.h=144,this.x=game.width,this.y=Math.random()*(game.height-50),this.constant=this.y,this.life=20,4*Math.random()<1&&(this.random=5,this.image=game.enemyImage_three_lv2,this.w=239,this.h=60)),this.r=25*Math.random()+5,this.speedScope=3*Math.random()+1,this.speed=game.enemySpeed+this.speedScope+this.random,this.waveSize=60,this.remove=!1,this.update=function(){var t;t=.002*(new Date).getTime(),"one"===this.type||"lv2seven"===this.type||"lv2eight"===this.type?(this.y-=this.speed,this.x=this.waveSize*Math.sin(t)+this.constant):("two"===this.type||"lv2one"===this.type||"lv2two"===this.type||"lv2three"===this.type||"lv2four"===this.type||"lv2five"===this.type)&&(this.x-=this.speed,this.y=this.waveSize*Math.sin(t)+this.constant),this.life<=0&&(this.remove=!0),"one"===this.type&&this.y<-10&&(this.remove=!0),"two"===this.type&&this.x<-10&&(this.remove=!0)},this.render=function(){game.ctx.drawImage(this.image,this.x,this.y)}},game.hint=function(t,i){this.x=t,this.y=i,this.opa=1,this.remove=!1,this.update=function(){this.y-=2,this.opa-=.05,(this.x<=0||this.opa<=0)&&(this.remove=!0)},this.render=function(){game.Draw.text("能量不足..",this.x,this.y,1,"rgba(255,255,255,"+this.opa+")")}},game.shieldSupply=function(t,i){this.x=t,this.y=i,this.dir=2*Math.random()>1?1:-1,this.vx=4*Math.random()*this.dir,this.vy=7*Math.random(),this.remove=!1,this.update=function(){this.x+=this.vx,this.y+=this.vy,this.vx*=.99,this.vy*=.99,this.vy-=.25,this.y<0&&(this.remove=!0)},this.render=function(){game.ctx.drawImage(game.shieldSupplyImage,this.x,this.y)}},game.explode=function(t,i){this.x=t,this.y=i,this.sx=0,this.num=0,this.update=function(){this.num++,this.num%4===0&&(this.sx+=120),this.sx>1080&&(this.remove=!0)},this.render=function(){game.ctx.drawImage(game.explodeImage,this.sx,0,120,120,this.x,this.y,120,120)}},game.collide=function(t,i,e){if(e){if(t.x>i.x-i.w/2&&t.x<i.x-i.w/2+i.w&&t.y<i.y-i.h/2+i.h&&t.y>i.y-i.h/2)return!0}else if(t.x>i.x&&t.x<i.x+i.w&&t.y<i.y+i.h&&t.y>i.y)return!0;return!1},game.bullet=function(t,i,e,s,h,a){this.x=t,this.y=i,this.bg=s,this.bt=h,this.brot=e,this.bimg=a,this.remove=!1,this.update=function(){this.x+=15*Math.cos(this.brot),this.y+=15*Math.sin(this.brot),this.remove=this.x<0||this.x>820||this.y<0||this.y>620?!0:!1},this.render=function(){game.ctx.save(),game.ctx.translate(this.x,this.y),game.ctx.rotate(this.brot),game.ctx.drawImage(this.bimg,this.bg,this.bt),game.ctx.restore()}},game.fireBall=function(){this.x=830,this.w=100,this.h=69,this.y=Math.round(600*Math.random()+10),this.speed=5,this.num=0,this.sx=0,this.life=8,this.remove=!1,this.update=function(){this.num++,this.x-=this.speed,this.num%4===0&&(this.sx+=100,700===this.sx&&(this.sx=0)),this.x<-10&&(this.remove=!0)},this.render=function(){game.ctx.drawImage(game.fireBallImage,this.sx,0,100,69,this.x,this.y,100,69)}},game.boss=function(){this.x=850,this.w=215,this.h=245,this.y=300,this.life=100,this.speed=.2,this.jiaodu=-90,this.sss=0,this.zhuan=!1,this.sx=880,this.time=0,this.h=245,this.ai="begin",this.up=!0,this.down=!1,this.ballone=!1,this.balltwo=!1,this.xunhuanjiguang=1,this.zidanthree=!1,this.zidanfour=!1,this.zidancishu=0,this.update=function(){this.life>0&&(600===this.x&&(this.ai="go"),"begin"===this.ai&&this.x--,"go"===this.ai&&(this.ballone=!0,this.time++,this.time>=100&&this.x++,this.x>=650&&(this.ai="goupdown")),"goupdown"===this.ai&&(this.time++,this.time>=100&&(this.up&&(this.time%10===0&&(this.sx+=220),this.sx>=1760&&(this.sx=1760),this.y-=.5,this.y<=100&&(this.xunhuanjiguang++,this.up=!1,this.down=!0)),this.down&&(this.time%10===0&&(this.sx-=220),this.sx<=0&&(this.sx=0),this.y+=.5,this.y>=500&&(this.xunhuanjiguang++,this.up=!0,this.down=!1)))),this.ballone&&this.xunhuanjiguang%2===0&&(game.jiguangpao.sx=0,this.balltwo=!0,this.ballone=!1,this.xunhuanjiguang=1),this.balltwo&&this.xunhuanjiguang%2===0&&(game.jiguangpao.sx=0,this.balltwo=!1,this.ballone=!0,this.xunhuanjiguang=1))},this.render=function(){game.ctx.save(),game.ctx.translate(this.x,this.y),game.ctx.rotate(this.jiaodu*Math.PI/180),game.ctx.drawImage(game.bossImage,this.sx,0,215,245,-110,-122.5,215,245),game.ctx.restore()}},game.jiguang=function(){this.x=700,this.y=0,this.sx=0,this.update=function(){this.y=game.bossOne.y,this.sx+=5,this.sx>=820&&(this.sx=820)},this.render=function(){game.ctx.save(),game.ctx.translate(this.x,this.y),game.ctx.rotate(90*Math.PI/180),game.ctx.drawImage(game.bossjiguangImage,0,0,67,this.sx,-30,0,67,this.sx),game.ctx.restore()}},game.bossBall=function(t,i,e){this.x=t,this.y=i,this.w=50,this.h=50,this.t=e,this.remove=!1,this.update=function(){this.x-=3,this.y=this.y-this.t,this.x<=-10&&(this.remove=!0)},this.render=function(){game.ctx.drawImage(game.bossBallImage,0,0,50,50,this.x,this.y,50,50)}},game.bossBallTwo=function(t,i,e){this.x=t,this.y=i,this.rad=e,this.w=20,this.h=21,this.remove=!1,this.update=function(){this.x+=5*Math.cos(this.rad),this.y+=5*Math.sin(this.rad),this.x<=-10&&(this.remove=!0),this.x>=830&&(this.remove=!0),this.y<=-10&&(this.remove=!0),this.y>=630&&(this.remove=!0)},this.render=function(){game.ctx.save(),game.ctx.translate(this.x,this.y),game.ctx.rotate(this.rad*Math.PI/180),game.ctx.drawImage(game.bossBallImage_two,0,0,20,21,-10,-10.5,20,21),game.ctx.restore()}},game.gemsScores=function(t,i,e){this.t=e,this.x=t,this.y=i,this.dir=2*Math.random()>1?1:-1,this.vx=4*Math.random()*this.dir,this.vy=7*Math.random(),this.remove=!1,this.update=function(){this.x+=this.vx,this.y+=this.vy,this.vx*=.99,this.vy*=.99,this.vy-=.25,this.y<0&&(this.remove=!0)},this.render=function(){game.ctx.drawImage(game.gemsScoresImage,0+160*this.t,0,160,30,this.x,this.y,160,30)}},game.sp=function(){},game.meteor=function(t,i,e,s,h,a){this.x=t,this.y=i,this.opa=e,this.r=s,this.speed=h,this.remove=!1,this.update=function(){this.x-=this.speed,this.x<-10&&(this.remove=!0)},this.render=function(){"red"===a?game.Draw.circle(this.x,this.y,this.r,"rgba(252,48,57,"+this.opa+")"):game.Draw.circle(this.x,this.y,this.r,"rgba(255,255,255,"+this.opa+")")}},window.addEventListener("load",game.init,!1),window.addEventListener("resize",game.resize,!1);